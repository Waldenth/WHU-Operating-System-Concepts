<h2>Step-1</h2>
<div class="answer"> <p> <b>Virtualization</b> means creating abstract hardware of a single computer and allowing multiple OS to run in separate environment.</p> <p> <b>Virtual Machine</b> is one such method of achieving virtualization. There are three different ways to implement virtual machines,</p> <p>1. Add Virtual machine support to the kernel.</p> <p>2. Providing Hardware features by the CPU.</p> <p>3. Supporting virtual machine implementation using I/O Devices.</p> </div>
<h2>Step-2</h2>
<div class="answer"> <p>Without some level of hardware support, it is impossible to implement virtualization. The more hardware support available, the more stable virtual system can be built.</p> <p>Modern CPUs can provide hardware assistance for virtualization in the following ways:</p> <p>• CPUs can implement special instructions so that binary translations are not needed. </p> <p>For example Intel x 86 CPU families has set of instructions called VT-x instructions.</p> <p>• Modern CPUs can move from Dual mode to multimode processor. For example AMD virtualization technique (AMD-v) is implemented in AMD processors. It defines two modes of operation –host and guest-. </p> <p>The VMM can enable the host mode, define all the virtual machine’s characteristics and then switch to guest mode. In guest mode, the guest operating system can see all the devices that are included in the host’s definition of guest.</p> <p>• The CPUs can also provide guest VCPU with state data structures to load and save guest CPU state, automatically when guest contexts are switched.</p> <p>• CPUs can also provide Virtual machine control structures (VMCSs). They can manage the guest and host state. Also they are useful during various guest execution controls and exit controls.</p> <p>• CPUs can also address memory management in virtual environment. CPUs can implement nested page tables in hardware , which allows VMM to fully control the paging , thus accelerating CPU’s translation from virtual to physical addresses</p> <p>• I/O is another area improved by hardware assistance from CPU.CPUs can provide hardware –assisted DMA (Direct Memory Access). In such case VMM sets up protection domains to tell the CPU which physical memory does belongs to the guest. Next the I/O devices are assigned to these protection domains. </p> <p>The hardware transforms the address in the DMA request issued by the I/O Device to the Host physical memory associated with the I/O. Thus the DMA transfers are passed between guest and device without the use of VMM.</p> <p>• CPUs provide interrupt remapping feature, so that the CPU can automatically deliver the interrupt destined for a guest, to the core of that is running the thread of the concerned guest. </p> <p>If interrupt remapping is not provided, then unexpected guest can generate interrupt thereby gaining the control of host system.</p></div>
