<h2>Step-1</h2>
<div class="answer"> <p> <b>Program Plan:</b> </p> <p>• Make a class HaikuServer that contain main function.</p> <p>• Use try catch block for error handling related to file. </p> <p>• Create a server socket in Try block.</p> <p>• Connect to the client and read the Haiku file using BufferReader.</p> <p>• Write the lines to the client.</p> <p>• If file is unable to open print an error message in catch block. </p> </div>
<h2>Step-2</h2>
<div class="answer"> <p> <b>Program:</b> </p> <p>//Importing the package</p> <p> <b>import</b> java<b>.</b>net<b>.*;</b></p> <p> <b>import</b> java<b>.</b>io<b>.*;</b></p> <p>//The Haiku server </p> <p>public class HaikuServer</p> <p> <b>{</b> </p> <p> //The startup function </p> <p> public static void main<b>(</b>String<b>[]</b> args<b>)</b></p> <p> <b>{</b></p> <p>In the try block create a server socket. Use a while loop and inside this loop connect to the client and read the Haiku File using BufferReader.</p> <p> <b>try</b> <b>{</b></p> <p> // create a new server socket</p> <p> ServerSocket sock <b>=</b> <b>new</b> ServerSocket<b>(</b>5575<b>);</b></p> <p> // Loop forever</p> <p> <b>while</b> <b>(</b><b>true</b><b>)</b> <b>{</b></p> <p> // Wait for a client to connect</p> <p> Socket client <b>=</b> sock<b>.</b>accept<b>();</b></p> <p> // Object to output to the client</p> <p> PrintWriter pout <b>=</b> <b>null</b><b>;</b></p> <p> // Object to read the Haiku file</p> <p> BufferedReader rin <b>=</b> <b>null</b><b>;</b></p> <p> <b>try</b> <b>{</b></p> <p> // Create an output stream</p> <p> pout <b>=</b> <b>new</b> PrintWriter<b>(</b></p> <p> client<b>.</b>getOutputStream<b>(),</b> <b>true</b><b>);</b></p> <p> // Open the Haiku file</p> <p> rin <b>=</b> <b>new</b> BufferedReader<b>(</b></p> <p> <b>new</b> FileReader<b>(</b>"3-24PP.haiku"<b>));</b></p> <p> // Loop while a line can be read</p> <p> String line<b>;</b></p> <p> <b>while</b> <b>((</b>line <b>=</b> rin<b>.</b>readLine<b>())</b></p> <p> <b>!=</b> <b>null</b><b>)</b></p> <p> // Write it to the client</p> <p> pout<b>.</b>println<b>(</b>line<b>);</b></p> <p> <b>}</b></p> <p>In the catch block file exception is handled. If file could not be opened then it will show an error message. In finally block, close the file input object.</p> <p> // Check if the file couldn't</p> <p> // be opened</p> <p> <b>catch</b> <b>(</b>FileNotFoundException</p> <p> exception<b>)</b> <b>{</b></p> <p> System<b>.</b>err<b>.</b>println<b>(</b>exception<b>);</b></p> <p> <b>}</b></p> <p> // Check if an error occurred on</p> <p> // reading from the file</p> <p> <b>catch</b> <b>(</b>IOException exception<b>)</b> <b>{</b></p> <p> System<b>.</b>err<b>.</b>println<b>(</b>exception<b>);</b></p> <p> <b>}</b> <b>finally</b> <b>{</b></p> <p> // Close the file input object</p> <p> <b>if</b> <b>(</b>rin <b>!=</b> <b>null</b><b>)</b></p> <p> rin<b>.</b>close<b>();</b></p> <p> // Close the output object</p> <p> <b>if</b> <b>(</b>pout <b>!=</b> <b>null</b><b>)</b></p> <p> pout<b>.</b>close<b>();</b></p> <p> <b>}</b></p> <p> // Close the connection to the client</p> <p> client<b>.</b>close<b>();</b></p> <p> <b>}</b></p> <p> <b>}</b></p> <p> // Did accepting a client blow up?</p> <p> <b>catch</b> <b>(</b>IOException exception<b>)</b> <b>{</b></p> <p> System<b>.</b>err<b>.</b>println<b>(</b>exception<b>);</b></p> <p> <b>}</b></p> <p> <b>}</b></p> <p> <b>}</b> </p> </div>
<h2>Step-3</h2>
<div class="answer"> <p> <b>Sample Output:</b> </p> <p>[abc@localhost 3]$ javac HaikuServer.java </p> <p>[abc@localhost 3]$ java HaikuServer &</p> <p>[1] 5512</p> <p>[abc@localhost 3]$ telnet localhost 5575</p> <p>Trying ::1...</p> <p>Connected to localhost.</p> <p>Escape character is '^]'.</p> <p>An old silent pond...</p> <p> </div>
<h2>Step-4</h2>
<div class="answer">A frog jumps into the pond,</p> <p>splash! Silence again.</p> <p>Connection closed by foreign host.</p></div>
