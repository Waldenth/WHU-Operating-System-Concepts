<h2>Step-1</h2>
<div class="answer"> <p> <b>Program Plan:</b> </p> <p>• Make a startup function main() to forks a child process.</p> <p>• Call the fork function. </p> <p>• If process id is grater then 0 than parent process will invoked.</p> <p>• If process id 0 child process become zombie.</p> <p>• If fork() did not work it will create error message. </p> </div>
<h2>Step-2</h2>
<div class="answer"> <p> <b>Program:</b> </p> <p>//Include the header files for performing the operations.</p> <p>#include <stdio.h></p> <p>#include <unistd.h></p> <p>#include <sys/types.h></p> <p>#include <sys/wait.h></p> <p>#include <errno.h></p> </div>
<h2>Step-3</h2>
<div class="answer"> <p>//The startup function</p> <p>int main<b>(</b>int argc<b>,</b> char <b>**</b>argv<b>)</b></p> <p> <b>{</b> </p> <p> // Fork off a process</p> <p> pid_t pid <b>=</b> fork<b>();</b></p> <p> <b>if</b> <b>(</b>pid <b>></b> 0<b>)</b></p> <p> <b>{</b></p> <p> // Parent process</p> <p> printf<b>(</b>"Pid of child %d\n"<b>,</b> pid<b>);</b></p> <p> </p> <p> // Sleep for 10 seconds</p> <p> sleep<b>(</b>10u<b>);</b></p> <p> </p> <p>childpid is storing the status of child process and executing child process. In else condition it is terminated by status.</p> <p> </p> <p> // Wait for child processes</p> <p> int status<b>;</b></p> <p> pid_t childpid <b>=</b> wait<b>(&</b>status<b>);</b></p> <p> <b>if</b> <b>(</b>WIFEXITED<b>(</b>status<b>))</b></p> <p> printf<b>(</b>"Child %d exited with status %d\n"<b>,</b></p> <p> childpid<b>,</b> WEXITSTATUS<b>(</b>status<b>));</b></p> <p> <b>else</b> <b>if</b> <b>(</b>WIFSIGNALED<b>(</b>status<b>))</b></p> <p> printf<b>(</b>"Child %d was terminated by signal </p> <p> %d\n"<b>,</b></p> <p> childpid<b>,</b> WTERMSIG<b>(</b>status<b>));</b></p> <p> <b>return</b> 0<b>;</b></p> <p> <b>}</b> </p> <p> <b>if</b> <b>(</b>pid <b>==</b> 0<b>)</b></p> <p> // The child process -> do nothing just exit</p> <p> // so we can become a zombie</p> <p> <b>return</b> 0<b>;</b></p> </div>
<h2>Step-4</h2>
<div class="answer"> <p>Else condition will run if fork is unable to run. Else statement will give an error message and return -err.</p> </div>
<h2>Step-5</h2>
<div class="answer"> <p> <b>else</b> </p> <p> <b>{</b></p> <p> // Check if fork didn't work</p> <p> int err <b>=</b> errno<b>;</b></p> <p> printf<b>(</b>"fork blew %d\n"<b>,</b> err<b>);</b></p> <p> <b>return</b> <b>-</b>err<b>;</b></p> <p> <b>}</b></p> <p> <b>}</b> </p> </div>
<h2>Step-6</h2>
<div class="answer"> <p> <b>Sample Output:</b> </p> <p>[abc@localhost 3]$ ./3-19PP &</p> <p>[2] 5563</p> <p>Pid of child 5566</p> <p>[abc@localhost 3]$ ps -l</p> <p>F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD</p> <p>0 S 1000 5563 21589 0 80 0 - 1037 hrtime pts/2 00:00:00 3-19PP</p> <p>1 Z 1000 5566 5563 0 80 0 - 0 exit pts/2 00:00:00 3-19 <defunct></p> <p>0 R 1000 5568 21589 0 80 0 - 30315 - pts/2 00:00:00 ps</p> <p>0 S 1000 21589 2144 0 80 0 - 29118 wait pts/2 00:00:00 bash</p> <p>0 S 1000 22210 21589 0 80 0 - 150788 poll_s pts/2 00:00:13 emacs</p> <p>[abc@localhost 3]$ Child 5566 exited with status 0</p> <p>!!</p> <p>ps -l</p> <p>F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD</p> <p>0 R 1000 5572 21589 0 80 0 - 30307 - pts/2 00:00:00 ps</p> <p>0 S 1000 21589 2144 0 80 0 - 29118 wait pts/2 00:00:00 bash</p> <p>0 S 1000 22210 21589 0 80 0 - 150788 poll_s pts/2 00:00:13 emacs</p> <p>[2]+ Done ./3-19PP</p></div>
