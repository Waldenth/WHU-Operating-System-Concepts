<h2>Step-1</h2>
<div class="answer"> <p> <b>Program Plan:</b> </p> <p>• Define a main() function and create a new server socket.</p> <p>• Write a Try block in which server socket is created and if error occurred then cached by catch block.</p> <p>• Create an Object to output to the client.</p> <p>• Check if the file couldn't be opened. Close the connection to the client.</p> </div>
<h2>Step-2</h2>
<div class="answer"> <p> <b>Program:</b> </p> <p>//Importing the package</p> <p> <b>import</b> java<b>.</b>net<b>.*;</b></p> <p> <b>import</b> java<b>.</b>io<b>.*;</b></p> <p>//The quote of the day server class</p> <p>public class QotdServer</p> <p> <b>{</b> </p> <p> //The startup function</p> <p> public static void main<b>(</b>String<b>[]</b> args<b>)</b></p> <p>In the main function create a server socket. Use a try catch block for handling exceptional error. In the while loop connect to the client and read the QOTD file using buffer reader. </p> <p> <b>{</b></p> <p> <b>try</b> <b>{</b></p> <p> // Create a new server socket</p> <p> ServerSocket sock <b>=</b> <b>new</b> ServerSocket<b>(</b>6017<b>);</b></p> <p> // Loop forever</p> <p> <b>while</b> <b>(</b><b>true</b><b>)</b> <b>{</b></p> <p> // Wait for a client to connect</p> <p> Socket client <b>=</b> sock<b>.</b>accept<b>();</b></p> <p> // Object to output to the client</p> <p> PrintWriter pout <b>=</b> <b>null</b><b>;</b></p> <p> // Object to read the QOTD file</p> <p> BufferedReader rin <b>=</b> <b>null</b><b>;</b></p> <p> <b>try</b> <b>{</b></p> <p> // Create an output stream</p> <p> pout <b>=</b> <b>new</b> PrintWriter<b>(</b></p> <p> client<b>.</b>getOutputStream<b>(),</b> <b>true</b><b>);</b></p> <p> // Open the QOTD file</p> <p> rin <b>=</b> <b>new</b> BufferedReader<b>(</b></p> <p> <b>new</b> FileReader<b>(</b>"3-23PP.qotd"<b>));</b></p> <p> // Loop while a line can be read</p> <p> String line<b>;</b></p> <p> <b>while</b> <b>((</b>line <b>=</b> rin<b>.</b>readLine<b>())</b></p> <p> <b>!=</b> <b>null</b><b>)</b></p> <p> // Write it to the client</p> <p> pout<b>.</b>println<b>(</b>line<b>);</b></p> <p> <b>}</b></p> <p>Check if the file couldn't be opened using catch block and if unable to open then print and error message.</p> <p> <b>catch</b> <b>(</b>FileNotFoundException</p> <p> exception<b>)</b> <b>{</b></p> <p> System<b>.</b>err<b>.</b>println<b>(</b>exception<b>);</b></p> <p> <b>}</b></p> <p> // Check if an error occurred on</p> <p> // reading from the file</p> <p> <b>catch</b> <b>(</b>IOException exception<b>)</b> <b>{</b></p> <p> System<b>.</b>err<b>.</b>println<b>(</b>exception<b>);</b></p> <p> <b>}</b> </p> <p> <b>finally</b> </p> <p> <b>{</b></p> <p> // Close the file input object</p> <p> <b>if</b> <b>(</b>rin <b>!=</b> <b>null</b><b>)</b></p> <p> rin<b>.</b>close<b>();</b></p> <p> // Close the output object</p> <p> <b>if</b> <b>(</b>pout <b>!=</b> <b>null</b><b>)</b></p> <p> pout<b>.</b>close<b>();</b></p> <p> <b>}</b></p> <p> // Close the connection to the client</p> <p> client<b>.</b>close<b>();</b></p> <p> <b>}</b></p> <p> <b>}</b></p> <p> // Did accepting a client blow up?</p> <p> <b>catch</b> <b>(</b>IOException exception<b>)</b> <b>{</b></p> <p> System<b>.</b>err<b>.</b>println<b>(</b>exception<b>);</b></p> <p> <b>}</b></p> <p> <b>}</b></p> <p> <b>}</b> </p> </div>
<h2>Step-3</h2>
<div class="answer"> <p> <b>Sample Output:</b> </p> <p>[abc@localhost 3]$ javac QotdServer.java </p> <p>[abc@localhost 3]$ java QotdServer &</p> <p>[1] 5916</p> <p>[abc@localhost 3]$ telnet localhost 6017</p> <p>Trying ::1...</p> <p>Connected to localhost.</p> <p>Escape character is '^]'.</p> <p>The best definition of a gentleman is a man who can play the accordion --</p> <p>but doesn't.</p> <p> </div>
<h2>Step-4</h2>
<div class="answer"> -- Tom Crichton</p> <p>Connection closed by foreign host.</p></div>
