<h2>Step-1</h2>
<div class="answer"> <p> </p> <p>We also require that writers have priority over readers: if a writer needs to write, current readers may complete reading, but new readers must be suspended until all writers are sleeping again. </p> <p>We solve the problem by first introducing three shared integer variable: naw for the number f active writers (at most 1), nar for the number of active readers, and nww for the number of willing (nonsleeping) writers. The solution is now expressed by refining the regions CSR and CSW:</p> <p>Monitor dp</p> <p>{</p> <p>Void write process ( )</p> <p>{ </p> <p>do</p> <p>{</p> <p>wait (wrt)</p> <p>- - - - -- - - </p> <p>// writing is performed </p> <p>- - - - - - - - </p> <p>signal (wrt);</p> <p>} while (true);</p> <p>void read process ( )</p> <p>{</p> <p>do </p> <p>{ wait (mutex);</p> <p>read count ++;</p> <p>of (read count = = 1</p> <p>wait (wrt)</p> <p>signal (mutex);</p> <p>- - - - - - </p> <p>// reading is performed</p> <p>- - - - - - -</p> <p>wait (mutex);</p> <p>read count - - - -;</p> <p>of (read count = = 0)</p> <p>signal (wrt);</p> <p>signal ( mutex);</p> <p>} while (true);</p> <p>}</p></div>
