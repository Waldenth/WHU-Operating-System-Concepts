<h2>Step-1</h2>
<div class="answer"> <p> <b>Monitor:</b> </p> <p>Semaphore provides the effective mechanism for process the synchronization but it is difficult to detect those errors. Instead use monitor to deal with such errors.</p> <p>The syntax for monitor is given below:</p> <p>monitor monitor_name</p> <p>{</p> <p>//Variable declarations</p> <p>function function_name()</p> <p>{</p> <p>...</p> <p>}</p> <p>.</p> <p>.</p> <p>.</p> <p>}</p> </div>
<h2>Step-2</h2>
<div class="answer"> <p> <b>Rewrite the code using monitor:</b> </p> <p>• The monitor is used to fix the race condition in the code (Note: Refer Question 5.37E in the book).</p> <p>• Then, the code is given below:</p> <p>monitor resources</p> <p>{</p> <p>// Variable declaration</p> <p>int available_resources;</p> <p>condition resource_available;</p> <p>When a process wants to get a number of resources, it invokes the decrease_count() function using the wait() semaphore.</p> <p>/* Decrease the available resources by count resources and return 0, if sufficient resources available. */</p> <p>int decrease_count(int count) </p> <p>{</p> <p>while (available_resources < count)</p> <p>resource_available.wait();</p> <p>available_resources -= count;</p> <p>}</p> <p>When a process wants to return a number of resources, it calls the increase_count() function using the signal() semaphore.</p> <p>/* increase available_resources by count */</p> <p>int increase_count(int count) </p> <p>{</p> <p>// Increment the available resources count</p> <p>available_resources += count;</p> <p>resource_available.signal();</p> <p>}</p> <p>}</p></div>
