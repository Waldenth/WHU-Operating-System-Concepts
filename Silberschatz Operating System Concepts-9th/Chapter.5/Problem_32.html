<h2>Step-1</h2>
<div class="answer"> <p>Consider,</p> <p>• A file is shared between different processes, and each of the processes have a unique number.</p> <p>• The file can be accessed simultaneously by multiple processes, with a constraint that the sum of unique numbers of the processes currently accessing should be less than <i>n</i>.</p> <p>A monitor to coordinate this access, can be created as:</p> <p>• Place the current count and file descriptor as the shared variables, in the monitor.</p> <p>• Create a method, <i>get()</i>, to check the constraint.</p> <p>• The thread should wait till the sum is greater than <i>n</i>.</p> <p>• Otherwise, the thread should change the state, and add to the value of sum.</p> <p>• Create a method, <i>release()</i>, to decrement the sum and wake other threads to check the constraint.</p> </div>
<h2>Step-2</h2>
<div class="answer"> <p>The pseudocode can be given as:</p> <p>monitor file_processes</p> <p>{</p> <p> // declare the file descriptor</p> <p> enum{THINKING, WAITING, READING} state[n];</p> <p> condition self[n];</p> <p> // declare shared variable to assign sum of id</p> <p> int sum;</p> <p> </p> <p> // define method to check if the sum of id</p> <p> void get(int id)</p> <p> {</p> <p> // assign WAITING to state[id]</p> <p> state[id] = WAITING;</p> <p> // check if the sum of process id is </p> <p> // greater than n</p> <p> if(sum > n)</p> <p> // process id is suspended</p> <p> self[id].wait();</p> <p> // provide access to the process associated</p> <p> // with the id</p> <p> state[id] = READING;</p> <p> // add the id to the sum and re-assign to sum</p> <p> sum = sum + id;</p> <p> }</p> <p> </p> <p> // define method to resume process associated to id</p> <p> void release(int id)</p> <p> {</p> <p> // assign THINKING to state[id]</p> <p> state[id] = THINKING;</p> <p> // subtract id from sum and re-assign to sum</p> <p> sum= sum - id;</p> <p> for(int i = (n-sum-1); i >= 0; i--)</p> <p> {</p> <p> // check if process associated with the id</p> <p> // is in waiting state</p> <p> if(state[id] == WAITING)</p> <p> // resume the process associated </p> <p> // with the id</p> <p> self[i].signal();</p> <p> }</p> <p> }</p> <p> </p> <p> // define the initialization method</p> <p> initialization_code()</p> <p> {</p> <p> for(int id = 0; id < n; id++)</p> <p> // assign THINKING to state[id]</p> <p> state[id] = THINKING;</p> <p> }</p> <p>}</p></div>
